local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")


local file = "Lunar_key.txt"
local OKkey = "canxing"

local function loadkey()
    local success, savekey = pcall(function()
        return readfile(file)
    end)
    return success and savekey or ""
end

local function createNotification(title, content, duration, color, parent)
    duration = duration or 5
    color = color or Color3.fromRGB(255, 188, 254)
    
    local Notification = Instance.new("Frame")
    Notification.Name = "Notification"
    Notification.AnchorPoint = Vector2.new(1, 1)
    Notification.BackgroundTransparency = 0.06
    Notification.AutomaticSize = Enum.AutomaticSize.XY
    Notification.BackgroundColor3 = Color3.fromRGB(16, 16, 16)
    Notification.BorderSizePixel = 0
    Notification.Position = UDim2.new(1, -25, 1, -25)
    Notification.Size = UDim2.fromOffset(232, 59)
    Notification.Parent = parent
    
    local NotifStroke = Instance.new("UIStroke")
    NotifStroke.Name = "_CHILD"
    NotifStroke.Color = Color3.fromRGB(158, 114, 158)
    NotifStroke.Transparency = 0.9
    NotifStroke.Parent = Notification
    
    local NotifAcrylic1 = Instance.new("ImageLabel")
    NotifAcrylic1.Name = "acrylicthing"
    NotifAcrylic1.Image = "rbxassetid://9968344105"
    NotifAcrylic1.ImageTransparency = 0.98
    NotifAcrylic1.ScaleType = Enum.ScaleType.Tile
    NotifAcrylic1.TileSize = UDim2.fromOffset(128, 128)
    NotifAcrylic1.BackgroundTransparency = 1
    NotifAcrylic1.Size = UDim2.fromScale(1, 1)
    
    local NotifAcrylicCorner1 = Instance.new("UICorner")
    NotifAcrylicCorner1.CornerRadius = UDim.new(0, 12)
    NotifAcrylicCorner1.Parent = NotifAcrylic1
    
    NotifAcrylic1.Parent = Notification
    
    local NotifAcrylic2 = Instance.new("ImageLabel")
    NotifAcrylic2.Name = "acrylicthing"
    NotifAcrylic2.Image = "rbxassetid://9968344227"
    NotifAcrylic2.ImageTransparency = 0.9
    NotifAcrylic2.ScaleType = Enum.ScaleType.Tile
    NotifAcrylic2.TileSize = UDim2.fromOffset(128, 128)
    NotifAcrylic2.BackgroundTransparency = 1
    NotifAcrylic2.Size = UDim2.fromScale(1, 1)
    
    local NotifAcrylicCorner2 = Instance.new("UICorner")
    NotifAcrylicCorner2.CornerRadius = UDim.new(0, 12)
    NotifAcrylicCorner2.Parent = NotifAcrylic2
    
    NotifAcrylic2.Parent = Notification
    
    local TextHolder = Instance.new("Frame")
    TextHolder.Name = "TextHolder"
    TextHolder.AutomaticSize = Enum.AutomaticSize.XY
    TextHolder.BackgroundTransparency = 1
    TextHolder.Position = UDim2.new(0, 7, 0.12, 0)
    TextHolder.Size = UDim2.fromOffset(20, 12)
    
    local TextLayout = Instance.new("UIListLayout")
    TextLayout.Padding = UDim.new(0, -4)
    TextLayout.SortOrder = Enum.SortOrder.LayoutOrder
    TextLayout.Parent = TextHolder
    
    local TitleText = Instance.new("TextLabel")
    TitleText.FontFace = Font.new("rbxassetid://12187365364", Enum.FontWeight.SemiBold)
    TitleText.Text = title
    TitleText.TextColor3 = Color3.fromRGB(199, 199, 203)
    TitleText.TextSize = 14
    TitleText.TextXAlignment = Enum.TextXAlignment.Left
    TitleText.AutomaticSize = Enum.AutomaticSize.X
    TitleText.BackgroundTransparency = 1
    TitleText.Position = UDim2.fromOffset(10, 8)
    TitleText.Size = UDim2.fromOffset(212, 20)
    TitleText.Parent = TextHolder
    
    local ContentText = Instance.new("TextLabel")
    ContentText.Name = "TextLabel"
    ContentText.FontFace = Font.new("rbxassetid://12187365364", Enum.FontWeight.SemiBold, Enum.FontStyle.Normal)
    ContentText.Text = content
    ContentText.TextColor3 = Color3.fromRGB(127, 127, 130)
    ContentText.TextSize = 12
    ContentText.TextXAlignment = Enum.TextXAlignment.Left
    ContentText.AutomaticSize = Enum.AutomaticSize.X
    ContentText.BackgroundTransparency = 1
    ContentText.Position = UDim2.fromOffset(10, 8)
    ContentText.Size = UDim2.fromOffset(212, 20)
    ContentText.Parent = TextHolder
    
    local TextPadding = Instance.new("UIPadding")
    TextPadding.PaddingBottom = UDim.new(0, 25)
    TextPadding.Parent = TextHolder
    
    TextHolder.Parent = Notification
    
    local ProgressBar = Instance.new("Frame")
    ProgressBar.BackgroundColor3 = Color3.fromRGB(44, 38, 44)
    ProgressBar.BorderSizePixel = 0
    ProgressBar.Position = UDim2.fromScale(0.0282, 0.8)
    ProgressBar.Size = UDim2.new(1, -20, 0, 7)
    
    local ProgressLayout = Instance.new("UIListLayout")
    ProgressLayout.Name = "UIListLayout"
    ProgressLayout.Wraps = true
    ProgressLayout.FillDirection = Enum.FillDirection.Horizontal
    ProgressLayout.SortOrder = Enum.SortOrder.LayoutOrder
    ProgressLayout.VerticalAlignment = Enum.VerticalAlignment.Bottom
    ProgressLayout.Parent = ProgressBar
    
    local ProgressFill = Instance.new("Frame")
    ProgressFill.BackgroundColor3 = color
    ProgressFill.BorderSizePixel = 0
    ProgressFill.Size = UDim2.fromScale(1, 1)
    
    local ProgressFillCorner = Instance.new("UICorner")
    ProgressFillCorner.Parent = ProgressFill
    
    local ProgressGradient = Instance.new("UIGradient")
    ProgressGradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 255, 255)),
        ColorSequenceKeypoint.new(0.752, Color3.fromRGB(147, 147, 147)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(127, 127, 127))
    }
    ProgressGradient.Parent = ProgressFill
    
    ProgressFill.Parent = ProgressBar
    
    local ProgressBarCorner = Instance.new("UICorner")
    ProgressBarCorner.Parent = ProgressBar
    
    ProgressBar.Parent = Notification
    
    local NotifCorner = Instance.new("UICorner")
    NotifCorner.CornerRadius = UDim.new(0, 4)
    NotifCorner.Parent = Notification
    
    local NotifPadding = Instance.new("UIPadding")
    NotifPadding.PaddingBottom = UDim.new(0, 12)
    NotifPadding.Parent = Notification
    
    local DismissButton = Instance.new("TextButton")
    DismissButton.Name = "DismissButton"
    DismissButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    DismissButton.BackgroundTransparency = 1
    DismissButton.Size = UDim2.fromScale(1, 1)
    DismissButton.Text = ""
    DismissButton.Parent = Notification
    
    TweenService:Create(ProgressFill, TweenInfo.new(duration, Enum.EasingStyle.Linear), {Size = UDim2.new(0, 0, 1, 0)}):Play()
    
    task.delay(duration, function()
        TweenService:Create(Notification, TweenInfo.new(0.5), {Position = UDim2.new(1, 25, 1, -25)}):Play()
        task.wait(0.5)
        Notification:Destroy()
    end)
    
    DismissButton.MouseButton1Click:Connect(function()
        TweenService:Create(Notification, TweenInfo.new(0.5), {Position = UDim2.new(1, 25, 1, -25)}):Play()
        task.wait(0.5)
        Notification:Destroy()
    end)
    
    DismissButton.MouseEnter:Connect(function()
        TweenService:Create(DismissButton, TweenInfo.new(0.1), {BackgroundTransparency = 0.65}):Play()
    end)
    
    DismissButton.MouseLeave:Connect(function()
        TweenService:Create(DismissButton, TweenInfo.new(0.1), {BackgroundTransparency = 1}):Play()
    end)

    return Notification
end

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "LunarLogin"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.Parent = Players.LocalPlayer:WaitForChild("PlayerGui")

local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.BackgroundColor3 = Color3.fromRGB(16, 16, 16)
MainFrame.BackgroundTransparency = 0.06
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.fromScale(0.5, 0.5)
MainFrame.Size = UDim2.fromOffset(400, 370)
MainFrame.Parent = ScreenGui

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 12)
UICorner.Parent = MainFrame

local AcrylicEffect1 = Instance.new("ImageLabel")
AcrylicEffect1.Name = "acrylicthing"
AcrylicEffect1.Image = "rbxassetid://9968344105"
AcrylicEffect1.ImageTransparency = 0.98
AcrylicEffect1.ScaleType = Enum.ScaleType.Tile
AcrylicEffect1.TileSize = UDim2.fromOffset(128, 128)
AcrylicEffect1.BackgroundTransparency = 1
AcrylicEffect1.Size = UDim2.fromScale(1, 1)
AcrylicEffect1.ZIndex = 0
AcrylicEffect1.Parent = MainFrame

local AcrylicCorner1 = Instance.new("UICorner")
AcrylicCorner1.CornerRadius = UDim.new(0, 12)
AcrylicCorner1.Parent = AcrylicEffect1

local AcrylicEffect2 = Instance.new("ImageLabel")
AcrylicEffect2.Name = "acrylicthing"
AcrylicEffect2.Image = "rbxassetid://9968344227"
AcrylicEffect2.ImageTransparency = 0.9
AcrylicEffect2.ScaleType = Enum.ScaleType.Tile
AcrylicEffect2.TileSize = UDim2.fromOffset(128, 128)
AcrylicEffect2.BackgroundTransparency = 1
AcrylicEffect2.Size = UDim2.fromScale(1, 1)
AcrylicEffect2.ZIndex = 0
AcrylicEffect2.Parent = MainFrame

local AcrylicCorner2 = Instance.new("UICorner")
AcrylicCorner2.CornerRadius = UDim.new(0, 12)
AcrylicCorner2.Parent = AcrylicEffect2

local UIStroke = Instance.new("UIStroke")
UIStroke.Name = "_CHILD"
UIStroke.Color = Color3.fromRGB(158, 114, 158)
UIStroke.Transparency = 0.9
UIStroke.Parent = MainFrame

local SideIndicator = Instance.new("Frame")
SideIndicator.Name = "sideindicator"
SideIndicator.AnchorPoint = Vector2.new(0.5, 0)
SideIndicator.BackgroundColor3 = Color3.fromRGB(255, 188, 254)
SideIndicator.BorderSizePixel = 0
SideIndicator.Position = UDim2.fromScale(0.5, 0)
SideIndicator.Size = UDim2.new(1, -50, 0, 2)
SideIndicator.Parent = MainFrame

local SideIndicatorCorner = Instance.new("UICorner")
SideIndicatorCorner.CornerRadius = UDim.new(0, 634)
SideIndicatorCorner.Parent = SideIndicator

local TitleLabel = Instance.new("TextLabel")
TitleLabel.Name = "title"
TitleLabel.FontFace = Font.new("rbxassetid://12187361378", Enum.FontWeight.Medium, Enum.FontStyle.Normal)
TitleLabel.Text = "Remnant Star"
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.TextSize = 19
TitleLabel.BackgroundTransparency = 1
TitleLabel.Position = UDim2.fromOffset(37, 15)
TitleLabel.Size = UDim2.new(0, 88, 0, 30)
TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
TitleLabel.Parent = MainFrame

local ControlsFrame = Instance.new("Frame")
ControlsFrame.Name = "Frame"
ControlsFrame.BackgroundTransparency = 1
ControlsFrame.Position = UDim2.new(1, -75, 0, 15)
ControlsFrame.Size = UDim2.new(0, 60, 0, 30)
ControlsFrame.Parent = MainFrame

local ControlsLayout = Instance.new("UIListLayout")
ControlsLayout.FillDirection = Enum.FillDirection.Horizontal
ControlsLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
ControlsLayout.Padding = UDim.new(0, 6)
ControlsLayout.SortOrder = Enum.SortOrder.LayoutOrder
ControlsLayout.VerticalAlignment = Enum.VerticalAlignment.Center
ControlsLayout.Parent = ControlsFrame

local CloseButton = Instance.new("TextButton")
CloseButton.Name = "Close"
CloseButton.Text = ""
CloseButton.BackgroundColor3 = Color3.fromRGB(252, 95, 83)
CloseButton.Size = UDim2.fromOffset(7, 7)
CloseButton.AutoButtonColor = false
CloseButton.Parent = ControlsFrame

local CloseButtonCorner = Instance.new("UICorner")
CloseButtonCorner.CornerRadius = UDim.new(0, 50)
CloseButtonCorner.Parent = CloseButton

local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Name = "Minimize"
MinimizeButton.Text = ""
MinimizeButton.BackgroundColor3 = Color3.fromRGB(242, 191, 60)
MinimizeButton.Size = UDim2.fromOffset(7, 7)
MinimizeButton.AutoButtonColor = false
MinimizeButton.Parent = ControlsFrame

local MinimizeButtonCorner = Instance.new("UICorner")
MinimizeButtonCorner.CornerRadius = UDim.new(0, 50)
MinimizeButtonCorner.Parent = MinimizeButton

local FullscreenButton = Instance.new("TextButton")
FullscreenButton.Name = "Fullscreen"
FullscreenButton.Text = ""
FullscreenButton.BackgroundColor3 = Color3.fromRGB(117, 166, 87)
FullscreenButton.Size = UDim2.fromOffset(7, 7)
FullscreenButton.AutoButtonColor = false
FullscreenButton.Parent = ControlsFrame

local FullscreenButtonCorner = Instance.new("UICorner")
FullscreenButtonCorner.CornerRadius = UDim.new(0, 50)
FullscreenButtonCorner.Parent = FullscreenButton

local isFullscreen = false
local originalSize = MainFrame.Size
local originalPosition = MainFrame.Position

FullscreenButton.MouseButton1Click:Connect(function()
    isFullscreen = not isFullscreen
    if isFullscreen then
        TweenService:Create(MainFrame, TweenInfo.new(0.3), {
            Size = UDim2.new(0.9, 0, 0.9, 0),
            Position = UDim2.new(0.5, 0, 0.5, 0)
        }):Play()
    else
        TweenService:Create(MainFrame, TweenInfo.new(0.3), {
            Size = originalSize,
            Position = originalPosition
        }):Play()
    end
    createNotification("FullScreen", isFullscreen and "Enabled" or "Disabled", 1.5, 
    Color3.fromRGB(117, 166, 87), ScreenGui)
end)

local ContentFrame = Instance.new("Frame")
ContentFrame.Name = "ContentFrame"
ContentFrame.BackgroundTransparency = 1
ContentFrame.Position = UDim2.fromOffset(0, 60)
ContentFrame.Size = UDim2.new(1, 0, 1, -60)
ContentFrame.Parent = MainFrame

local GameLabel = Instance.new("TextLabel")
GameLabel.Name = "GameLabel"
GameLabel.FontFace = Font.new("rbxassetid://12187365364")
GameLabel.Text = "游戏: " .. game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name
GameLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
GameLabel.TextSize = 12
GameLabel.BackgroundTransparency = 1
GameLabel.Position = UDim2.fromOffset(20, 0)
GameLabel.Size = UDim2.new(1, -40, 0, 20)
GameLabel.Parent = ContentFrame

local KeySection = Instance.new("Frame")
KeySection.Name = "KeySection"
KeySection.BackgroundTransparency = 1
KeySection.Position = UDim2.fromOffset(20, 25) 
KeySection.Size = UDim2.new(1, -40, 0, 70)
KeySection.Parent = ContentFrame

local KeyLabel = Instance.new("TextLabel")
KeyLabel.Name = "KeyLabel"
KeyLabel.FontFace = Font.new("rbxassetid://12187365364")
KeyLabel.Text = "密钥"
KeyLabel.TextColor3 = Color3.fromRGB(122, 122, 122)
KeyLabel.TextSize = 12
KeyLabel.TextXAlignment = Enum.TextXAlignment.Left
KeyLabel.BackgroundTransparency = 1
KeyLabel.Position = UDim2.fromOffset(0, 0)
KeyLabel.Size = UDim2.new(1, 0, 0, 20)
KeyLabel.Parent = KeySection

local KeyTextboxHolder = Instance.new("Frame")
KeyTextboxHolder.Name = "TextboxHolder"
KeyTextboxHolder.BackgroundColor3 = Color3.fromRGB(86, 86, 86)
KeyTextboxHolder.BackgroundTransparency = 0.95
KeyTextboxHolder.BorderSizePixel = 0
KeyTextboxHolder.Position = UDim2.fromOffset(0, 25)
KeyTextboxHolder.Size = UDim2.new(1, -80, 0, 30)
KeyTextboxHolder.Parent = KeySection

local KeyTextboxCorner = Instance.new("UICorner")
KeyTextboxCorner.CornerRadius = UDim.new(0, 4)
KeyTextboxCorner.Parent = KeyTextboxHolder

local KeyTextboxStroke = Instance.new("UIStroke")
KeyTextboxStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
KeyTextboxStroke.Color = Color3.fromRGB(56, 56, 56)
KeyTextboxStroke.Transparency = 0.5
KeyTextboxStroke.Parent = KeyTextboxHolder

local KeyTextbox = Instance.new("TextBox")
KeyTextbox.Name = "TextBox"
KeyTextbox.ClearTextOnFocus = false
KeyTextbox.FontFace = Font.new("rbxassetid://12187365364")
KeyTextbox.PlaceholderColor3 = Color3.fromRGB(170, 170, 170)
KeyTextbox.PlaceholderText = "输入密钥..."
KeyTextbox.Text = loadkey()
KeyTextbox.TextColor3 = Color3.fromRGB(240, 240, 240)
KeyTextbox.TextSize = 12
KeyTextbox.TextXAlignment = Enum.TextXAlignment.Left
KeyTextbox.BackgroundTransparency = 1
KeyTextbox.Position = UDim2.fromOffset(10, 0)
KeyTextbox.Size = UDim2.fromScale(1, 1)
KeyTextbox.Parent = KeyTextboxHolder

local CheckButton = Instance.new("TextButton")
CheckButton.Name = "CheckButton"
CheckButton.FontFace = Font.new("rbxassetid://12187365364")
CheckButton.Text = "检查"
CheckButton.TextColor3 = Color3.fromRGB(0, 0, 0)
CheckButton.TextSize = 12
CheckButton.BackgroundColor3 = Color3.fromRGB(255, 188, 254)
CheckButton.BorderSizePixel = 0
CheckButton.Position = UDim2.new(1, -70, 0, 25)
CheckButton.Size = UDim2.fromOffset(70, 30)
CheckButton.Parent = KeySection

local CheckButtonCorner = Instance.new("UICorner")
CheckButtonCorner.CornerRadius = UDim.new(0, 4)
CheckButtonCorner.Parent = CheckButton

local StatusLabel = Instance.new("TextLabel")
StatusLabel.Name = "StatusLabel"
StatusLabel.FontFace = Font.new("rbxassetid://12187365364")
StatusLabel.Text = "密钥状态: 未检查"
StatusLabel.TextColor3 = Color3.fromRGB(120, 120, 120)
StatusLabel.TextSize = 12
StatusLabel.BackgroundTransparency = 1
StatusLabel.Position = UDim2.fromOffset(0, 60)
StatusLabel.Size = UDim2.new(1, 0, 0, 20)
StatusLabel.Parent = KeySection

local AutoExecuteHolder = Instance.new("Frame")
AutoExecuteHolder.Name = "AutoExecuteHolder"
AutoExecuteHolder.BackgroundTransparency = 1
AutoExecuteHolder.Position = UDim2.fromOffset(0, 85)
AutoExecuteHolder.Size = UDim2.new(1, 0, 0, 20)
AutoExecuteHolder.Parent = KeySection

local AutoExecuteCheckbox = Instance.new("Frame")
AutoExecuteCheckbox.Name = "Checkbox"
AutoExecuteCheckbox.BackgroundColor3 = Color3.fromRGB(28, 29, 32)
AutoExecuteCheckbox.BackgroundTransparency = 0.5
AutoExecuteCheckbox.BorderSizePixel = 0
AutoExecuteCheckbox.Position = UDim2.fromOffset(0, 0)
AutoExecuteCheckbox.Size = UDim2.fromOffset(16, 16)
AutoExecuteCheckbox.Parent = AutoExecuteHolder

local AutoExecuteCorner = Instance.new("UICorner")
AutoExecuteCorner.CornerRadius = UDim.new(0, 3)
AutoExecuteCorner.Parent = AutoExecuteCheckbox

local AutoExecuteCheck = Instance.new("Frame")
AutoExecuteCheck.Name = "Check"
AutoExecuteCheck.BackgroundColor3 = Color3.fromRGB(255, 188, 254)
AutoExecuteCheck.BorderSizePixel = 0
AutoExecuteCheck.Position = UDim2.fromOffset(3, 3)
AutoExecuteCheck.Size = UDim2.fromOffset(10, 10)
AutoExecuteCheck.Visible = true 
AutoExecuteCheck.Parent = AutoExecuteCheckbox

local AutoExecuteCheckCorner = Instance.new("UICorner")
AutoExecuteCheckCorner.CornerRadius = UDim.new(0, 2)
AutoExecuteCheckCorner.Parent = AutoExecuteCheck

local AutoExecuteButton = Instance.new("TextButton")
AutoExecuteButton.Name = "Button"
AutoExecuteButton.Text = ""
AutoExecuteButton.BackgroundTransparency = 1
AutoExecuteButton.Size = UDim2.fromOffset(16, 16)
AutoExecuteButton.Parent = AutoExecuteCheckbox

local AutoExecuteLabel = Instance.new("TextLabel")
AutoExecuteLabel.Name = "Label"
AutoExecuteLabel.FontFace = Font.new("rbxassetid://12187365364")
AutoExecuteLabel.Text = "验证后自动执行脚本"
AutoExecuteLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
AutoExecuteLabel.TextSize = 12
AutoExecuteLabel.TextXAlignment = Enum.TextXAlignment.Left
AutoExecuteLabel.BackgroundTransparency = 1
AutoExecuteLabel.Position = UDim2.fromOffset(24, 0)
AutoExecuteLabel.Size = UDim2.new(1, -24, 1, 0)
AutoExecuteLabel.Parent = AutoExecuteHolder

local ButtonsSection = Instance.new("Frame")
ButtonsSection.Name = "ButtonsSection"
ButtonsSection.BackgroundTransparency = 1
ButtonsSection.Position = UDim2.fromOffset(20, 135) 
ButtonsSection.Size = UDim2.new(1, -40, 0, 180)
ButtonsSection.Parent = ContentFrame

local FooterLabel = Instance.new("TextLabel")
FooterLabel.Name = "FooterLabel"
FooterLabel.FontFace = Font.new("rbxassetid://12187365364")
FooterLabel.Text = "Remnant Star 2025 | 很高兴见到你"
FooterLabel.TextColor3 = Color3.fromRGB(120, 120, 120)
FooterLabel.TextSize = 12
FooterLabel.BackgroundTransparency = 1
FooterLabel.Position = UDim2.fromOffset(0, 150)
FooterLabel.Size = UDim2.new(1, 0, 0, 20)
FooterLabel.Parent = ButtonsSection

local dragging = false
local dragInput
local dragStart
local startPos

local function updateDrag(input)
    local delta = input.Position - dragStart
    MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

MainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

MainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        updateDrag(input)
    end
end)

local function applyButtonHoverEffect(button)
    button.MouseEnter:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.3), {BackgroundTransparency = 0.4}):Play()
    end)
    
    button.MouseLeave:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.3), {BackgroundTransparency = 0.5}):Play()
    end)
end

local autoExecuteEnabled = true
AutoExecuteButton.MouseButton1Click:Connect(function()
    autoExecuteEnabled = not autoExecuteEnabled
    AutoExecuteCheck.Visible = autoExecuteEnabled
    createNotification("自动执行", autoExecuteEnabled and "已开" or "已关闭", 2, Color3.fromRGB(255, 188, 254), ScreenGui)
end)

CheckButton.MouseButton1Click:Connect(function()
    local inputKey = KeyTextbox.Text:gsub("%s+", "") 
    
    if inputKey == "" then
        createNotification("失败", "再次输入", 3, Color3.fromRGB(255, 85, 85), ScreenGui)
        StatusLabel.Text = "结果: 错误"
        StatusLabel.TextColor3 = Color3.fromRGB(255, 85, 85)
        return
    end
    
    if inputKey == OKkey then
        pcall(function() 
            writefile(file, OKkey)
        end)
        
        createNotification("成功", "密钥正确", 5, Color3.fromRGB(85, 255, 127), ScreenGui)
        StatusLabel.Text = "结果: 正确"
        StatusLabel.TextColor3 = Color3.fromRGB(85, 255, 127)
        
        task.delay(2, function()
            createNotification("Bem-vindo", "Acesso liberado!", 3, Color3.fromRGB(255, 188, 254), ScreenGui)
            ScreenGui:Destroy()
local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

WindUI:Notify({
    Title = "Remnant Star",
    Content = "残星",
    Duration = 5,
})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character
local hum = Character.HumanoidRootPart
local PlayerGui = LocalPlayer.PlayerGui

local Window = WindUI:CreateWindow({
    Title = "Remnant Star [吃掉世界]",
    Icon = "rbxassetid://129260712070622",
    IconThemed = true,
    Author = "残星",
    Folder = "CloudHub",
    Size = UDim2.fromOffset(300, 270),
    Transparent = true,
    Theme = "Dark",
    User = {
        Enabled = true,
        Callback = function() print("clicked") end,
        Anonymous = false
    },
    SideBarWidth = 200,
    -- HideSearchBar = true,
    ScrollBarEnabled = true,
    -- Background = "rbxassetid://13511292247", -- rbxassetid only
})

Window:EditOpenButton({
    Title = "打开UI",
    Icon = "monitor",
    CornerRadius = UDim.new(0,16),
    StrokeThickness = 2,
    Color = ColorSequence.new(
        Color3.fromHex("FF0F7B"), 
        Color3.fromHex("F89B29")
    ),
    Draggable = true,
})

MainSection = Window:Section({
    Title = "Remnant Star",
    Opened = true,
})

Main = MainSection:Tab({ Title = "自动", Icon = "Sword" })
Maii = MainSection:Tab({ Title = "玩家",Icon = "Sword" })

local main = {
    AutoGrab = false,
    AutoEat = false,
    AutoThrow = false,
    AutoSell = false,
    AutoBox = false,
}

Main:Toggle({
    Title = "自动抓",
    Image = "bird",
    Value = main.AutoGrab,
    Callback = function(state)
        main.AutoGrab = state
        spawn(function()
            while main.AutoGrab and task.wait() do
                game:GetService("Players").LocalPlayer.Character.Events.Grab:FireServer(false,false,false)
            end
        end)
    end
})
Main:Toggle({
    Title = "自动吃",
    Image = "bird",
    Value = main.AutoEat,
    Callback = function(state)
        main.AutoEat = state
        spawn(function()
        while main.AutoEat and task.wait() do
        game:GetService("Players").LocalPlayer.Character.Events.Eat:FireServer()
        end
      end)
    end
}) 
Main:Toggle({
    Title = "自动扔",
    Image = "bird",
    Value = main.AutoThrow,
    Callback = function(state)
    main.AutoThrow = state
    spawn(function()
    while main.AutoThrow and task.wait() do
    game:GetService("Players").LocalPlayer.Character.Events.Throw:FireServer()
     end
    end)
   end
})
Main:Toggle({
    Title = "自动卖",
    Image = "bird",
    Value = main.AutoSell,
    Callback = function(state)
    main.AutoSell = state
    spawn(function()
    while main.AutoSell and task.wait() do
    game:GetService("Players").LocalPlayer.Character.Events.Sell:FireServer()
     end
    end)
   end
})
Main:Toggle({
     Title = "自动领箱子",
     Image = "bird",
     Value = main.AutoBox,
     Callback = function(state)
     main.AutoBox = state
     spawn(function()
     while main.AutoBox and task.wait() do
     game:GetService("ReplicatedStorage").Events.RewardEvent:FireServer(game:GetService("Players").LocalPlayer.TimedRewards.SmallReward)
       end
      end)
     end
})
Maii:Input({
    Title = "速度",
    Desc = "设置移动速度",
    Value = "", -- 默认移速值
    InputIcon = "bird",
    Type = "Input",
    Placeholder = "输入数字（如30）",
    Callback = function(Value) -- 这里参数名用Value，与后续保持一致
        -- 将输入的文本转为数字（关键步骤）
        local speed = tonumber(Value)
        if not speed then
            print("请输入有效的数字")
            return
        end
        -- 动态获取角色和Humanoid，避免角色重生后失效
        local player = game.Players.LocalPlayer
        local character = player.Character or player.CharacterAdded:Wait()
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = speed -- 这里使用转换后的数字speed
            print("移速已设置为：" .. speed)
        else
            print("未找到角色的Humanoid")
        end
    end
})
Maii:Input({
    Title = "跳跃高度",
    Desc = "设置跳跃高度",
    Value = "",
    InputIcon = "bird",
    Type = "Input",
    Placeholder = "输入数字（如30）",
    Callback = function(Value)
        -- 将输入的字符串转为数字
        local jumpPower = tonumber(Value)
        if not jumpPower then
            print("请输入有效的数字")
            return
        end
        -- 动态获取角色和Humanoid，避免角色失效
        local player = game.Players.LocalPlayer
        local character = player.Character or player.CharacterAdded:Wait()
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.JumpPower = jumpPower -- 赋值给跳跃力
            print("跳跃高度已设置为：" .. jumpPower)
        else
            print("未找到角色的Humanoid")
        end
    end
})
Maii:Button({
   Title = "无限跳",
   Desc = "重置人物即可关闭",
   Locked = false,
   Callback = function()
   loadstring(game:HttpGet("https://pastebin.com/raw/V5PQy3y0", true))()
	end
})
        end)
    else
        createNotification("错误", "密钥不正确, 再次输入", 3, Color3.fromRGB(255, 85, 85), ScreenGui)
        StatusLabel.Text = "结果: 错误"
        StatusLabel.TextColor3 = Color3.fromRGB(255, 85, 85)
        KeyTextbox.Text = ""
    end
end)


KeyTextbox.Focused:Connect(function()
    TweenService:Create(KeyTextboxHolder, TweenInfo.new(0.2), {BackgroundTransparency = 0.87}):Play()
    TweenService:Create(KeyLabel, TweenInfo.new(0.2), {TextColor3 = Color3.fromRGB(255, 255, 255)}):Play()
end)

KeyTextbox.FocusLost:Connect(function()
    TweenService:Create(KeyTextboxHolder, TweenInfo.new(0.2), {BackgroundTransparency = 0.95}):Play()
    TweenService:Create(KeyLabel, TweenInfo.new(0.2), {TextColor3 = Color3.fromRGB(122, 122, 122)}):Play()
end)

CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

MinimizeButton.MouseButton1Click:Connect(function()
    MainFrame.Visible = false
    
    local RestoreButton = Instance.new("TextButton")
    RestoreButton.Name = "RestoreButton"
    RestoreButton.Text = "Remnant Star"
    RestoreButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    RestoreButton.TextSize = 14
    RestoreButton.Font = Enum.Font.Gotham
    RestoreButton.BackgroundColor3 = Color3.fromRGB(16, 16, 16)
    RestoreButton.BackgroundTransparency = 0.1
    RestoreButton.BorderSizePixel = 0
    RestoreButton.Position = UDim2.new(0, 10, 0, 10)
    RestoreButton.Size = UDim2.fromOffset(100, 30)
    RestoreButton.Parent = ScreenGui
    
    local RestoreCorner = Instance.new("UICorner")
    RestoreCorner.CornerRadius = UDim.new(0, 6)
    RestoreCorner.Parent = RestoreButton
    
    RestoreButton.MouseButton1Click:Connect(function()
        MainFrame.Visible = true
        RestoreButton:Destroy()
    end)
end)

MainFrame.Visible = true
